<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>æ¤œå®šçµæœ</title>
  <link rel="icon" href="icon.png" type="image/png">
  <link rel="apple-touch-icon" href="icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css">
  <style>
    .score-circle {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: #fff;
      border: 5px solid #ff69b2;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin: 20px auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .score-num {
      font-size: 48px;
      font-weight: 900;
      color: #ff69b2;
      line-height: 1;
    }
    .score-total {
      font-size: 18px;
      color: #888;
    }
    .rank-text {
      font-size: 20px;
      font-weight: bold;
      margin: 10px 0;
      color: #333;
    }
    .comment {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
      margin-bottom: 24px;
    }
  </style>
</head>
<body class="locked">

  <div class="box">
    <h2 class="title">æ¤œå®šçµæœ</h2>

    <div class="score-circle">
      <div class="score-num" id="correct-count">0</div>
      <div class="score-total" id="total-count">/ 0å•</div>
    </div>

    <p id="rank" class="rank-text">åˆ¤å®šä¸­...</p>
    <p id="comment" class="comment"></p>

    <button onclick="location.href='group.html'">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
    <button class="back-btn" onclick="location.href='index.html'">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
  </div>

  <script>
    const state = JSON.parse(localStorage.getItem("quizState"));

    if (!state) {
      location.href = "index.html";
    }

    const correct = state.correctCount || 0;
    const total = state.quizIds.length || 0;
    const rate = (correct / total) * 100;

    document.getElementById("correct-count").textContent = correct;
    document.getElementById("total-count").textContent = `/ ${total}å•`;

    // ãƒ©ãƒ³ã‚¯ã¨ã‚³ãƒ¡ãƒ³ãƒˆã®åˆ¤å®š
    let rank = "";
    let comment = "";

    if (rate === 100) {
      rank = "ğŸŒŸ ç¥æ¨ã—ç´š ğŸŒŸ";
      comment = "å®Œç’§ã§ã™ï¼ã‚ãªãŸã¯æ­£çœŸæ­£éŠ˜ã®ãƒ•ã‚¡ãƒ³ã§ã™ã­ã€‚ã“ã®çµæœã‚’è‡ªæ…¢ã—ã¡ã‚ƒã„ã¾ã—ã‚‡ã†ï¼";
    } else if (rate >= 80) {
      rank = "ğŸ¥‡ ç‰©çŸ¥ã‚Šç´š";
      comment = "ã™ã”ã„ï¼ã‹ãªã‚Šã®æ­£è§£ç‡ã§ã™ã€‚ã‚ã¨å°‘ã—ã§å…¨å•æ­£è§£ã§ã—ãŸã­ï¼";
    } else if (rate >= 50) {
      rank = "ğŸ¥ˆ ãƒ•ã‚¡ãƒ³ç´š";
      comment = "ãƒŠã‚¤ã‚¹ï¼ã‚ˆãçŸ¥ã£ã¦ã„ã¾ã™ã­ã€‚æ¬¡ã¯å…¨å•æ­£è§£ã‚’ç›®æŒ‡ã—ã¦é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼";
    } else {
      rank = "ğŸ¥‰ ãƒ“ã‚®ãƒŠãƒ¼ç´š";
      comment = "ã¾ãšã¯æ›²ã‚’ãŸãã•ã‚“è´ã„ã¦ã€ãƒ¡ãƒ³ãƒãƒ¼ã®æ­Œå£°ã‚’è¦šãˆã¦ã„ãã¾ã—ã‚‡ã†ï¼";
    }

    document.getElementById("rank").textContent = rank;
    document.getElementById("comment").textContent = comment;
  </script>

</body>
</html>