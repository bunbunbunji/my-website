<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>æ¤œå®šçµæœ - KAWAII LABæ¤œå®š</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css">
  <style>
    .score-circle {
      width: 150px;
      height: 150px;
      border: 8px solid #ffb6c1;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin: 20px auto;
    }
    .score-number {
      font-size: 40px;
      font-weight: bold;
      color: #ff69b4;
    }
    .score-label {
      font-size: 14px;
      color: #666;
    }
    .message {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 30px;
      color: #333;
    }
    .result-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .btn-secondary {
      background: #fff;
      color: #ffb6c1;
      border: 2px solid #ffb6c1;
    }
  </style>
</head>
<body class="scroll-page">

  <div class="box">
    <h2 class="title">æ¤œå®šçµæœ</h2>
    
    <div class="score-circle">
      <span class="score-label">æ­£è§£æ•°</span>
      <span class="score-number" id="final-score">0</span>
      <span class="score-label" id="total-questions">/ 10</span>
    </div>

    <p class="message" id="result-message"></p>

    <div class="result-buttons">
      <button onclick="retry()">åŒã˜æ¡ä»¶ã§ã‚‚ã†ä¸€åº¦</button>
      <button class="btn-secondary" onclick="goHome()">ã‚°ãƒ«ãƒ¼ãƒ—é¸æŠã«æˆ»ã‚‹</button>
    </div>
  </div>

  <script>
    const state = JSON.parse(localStorage.getItem("quizState"));

    if (!state) {
      location.href = "index.html";
    }

    const score = state.correctCount || 0;
    const total = state.quizIds ? state.quizIds.length : 10;

    // ã‚¹ã‚³ã‚¢è¡¨ç¤º
    document.getElementById("final-score").textContent = score;
    document.getElementById("total-questions").textContent = `/ ${total}`;

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®åˆ†å²
    const msgEl = document.getElementById("result-message");
    const ratio = score / total;
    if (ratio === 1) {
      msgEl.textContent = "ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ğŸ‰ ã‚ãªãŸã¯çœŸã®ã‚ªã‚¿ã‚¯ã§ã™ï¼";
    } else if (ratio >= 0.7) {
      msgEl.textContent = "ã™ã”ã„ï¼âœ¨ ã‹ãªã‚Šã®èãè¾¼ã¿é‡ã§ã™ã­ï¼";
    } else if (ratio >= 0.4) {
      msgEl.textContent = "ã‚ã¨ä¸€æ­©ï¼ã‚‚ã£ã¨æ›²ã‚’è´ã„ã¦ã¿ã‚ˆã†ï¼";
    } else {
      msgEl.textContent = "ä¼¸ã³ã—ã‚ãŸã£ã·ã‚Šï¼ãŸãã•ã‚“è´ã„ã¦è¦šãˆã‚ˆã†ï¼";
    }

    function retry() {
      // ã‚¹ã‚³ã‚¢ã ã‘ãƒªã‚»ãƒƒãƒˆã—ã¦ç¢ºèªç”»é¢ã¸
      state.currentIndex = 0;
      state.correctCount = 0;
      localStorage.setItem("quizState", JSON.stringify(state));
      location.href = "confirm.html";
    }

    function goHome() {
      location.href = "group.html";
    }
  </script>
</body>
</html>